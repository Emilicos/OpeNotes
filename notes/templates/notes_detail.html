{% extends 'base.html' %} 
{% load static %} 

{% block styles %}
<style>
    .form input[type="text"], .form input[type="number"], .form textarea, .form select {
        background-color: #334155;
        border: solid 1px rgb(203 213 225);
        color: #fff; /* White text color */
        padding: 0.75em 1em;
        border-radius: 0.5em;
    }

    .form p {
        display: flex;
        flex-direction: column;
        row-gap: 1em;
        font-weight: bold;
    }
</style>
{% endblock styles %}

{% block content %}
<h1> {{notes.description}} </h1>

<div class="w-full text-right flex justify-end">
    <button type="button" class="bg-orange-500 flex shadow text-white rounded-md text-sm border-y border-transparent py-2 font-bold px-3 hover:bg-orange-600 dark:hover:bg-orange-400 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-orange-300 dark:focus:ring-offset-slate-900 dark:focus:ring-orange-700" data-bs-toggle="modal" data-bs-target="#reportModal">Report Notes</button>
</div>

  
<form method="post" onsubmit="return false;" class="modal fade" id="reportModal" tabindex="-1" role="dialog" aria-labelledby="reportModalTitle" aria-hidden="true">
    {% csrf_token %}
    <div class="modal-dialog modal-dialog-centered" role="document">
      <div class="modal-content bg-[#272B52]">
        <div class="modal-header border-b-0">
          <h5 class="font-bold" id="exampleModalLongTitle">Report Notes</h5>
          <button type="button" class="close" data-bs-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body flex flex-col form gap-y-6">
            <p>
                <label for="id_name">Alasan:</label>
                <input type="text" name="alasan" required="">
            </p>
            <input type="hidden" name="notes_id" value="{{notes.id}}">
        </div>
        <div class="modal-footer border-t-0">
          <button type="button" data-bs-dismiss="modal" class="bg-rose-500 flex-auto shadow text-white rounded-md text-sm border-y border-transparent py-2 font-bold px-3 hover:bg-rose-600 dark:hover:bg-rose-400 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-rose-300 dark:focus:ring-offset-slate-900 dark:focus:ring-rose-700" data-dismiss="modal">Batal</button>
          <button type="submit" data-bs-dismiss="modal" id = "button_report" class="bg-green-500 flex-auto shadow text-white rounded-md text-sm border-y border-transparent py-2 font-bold px-3 hover:bg-green-600 dark:hover:bg-green-400 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-300 dark:focus:ring-offset-slate-900 dark:focus:ring-green-700">Simpan</button>
        </div>
      </div>
    </div>
  </div>
</form>

<div class="toast" role="alert" aria-live="assertive" aria-atomic="true" data-delay="5000">
    <div class="toast-header bg-success text-white">
        <strong class="mr-auto">Success!</strong>
        <button type="button" class="ml-2 mb-1 close" data-dismiss="toast" aria-label="Close">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <div class="toast-body">
        Operation completed successfully.
    </div>
</div>

<script>
    function reportNotes() {
        console.log(new FormData(document.querySelector('#reportModal')))
        fetch(`/report/`, {
            method: "POST",
            body: new FormData(document.querySelector('#reportModal'))
        }).then(res => {
            if (res.statusText == 'Created'){
                console.log("bisa yey")
            }
        })

        document.getElementById("form").reset()
        return false
    }

    document.getElementById("button_report").onclick = reportNotes
</script>

{% endblock content %}